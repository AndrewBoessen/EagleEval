<!-- No grid template -->
<ng-template #noReviewsBlock>
  <div class="reviewinfo">
    No Reviews. Go to a professor's page to add a review.
  </div>
</ng-template>

<app-home-bar></app-home-bar>
<div class="contentwrapper">
  <div class="profilecard card">
    <div class="accountdetailswrapper whitecard">
      <div class="profileheaderwrapper">
        <h1 class="nameandstatheader">Hello {{ user_name }}</h1>

        <div class="buttomsWrapper">
          <p-toast></p-toast>
          <p-confirmDialog> </p-confirmDialog>
          <div class="buttonMargin">
            <p-button
              (onClick)="removeAccount()"
              icon="pi pi-times"
              label="Remove Account"
            ></p-button>
          </div>

          <p-button
            (onClick)="logout()"
            icon="pi pi-sign-out"
            label="Log out"
          ></p-button>
        </div>
      </div>
      <h1 class="useremail">{{ user_email }}</h1>

      <div class="smlldiv"></div>
      <h1 class="reviewsheader">Reviews</h1>
      <div class="fildwidthdiv"></div>
      <ng-container *ngIf="comments!.length > 0; else noReviewsBlock">
        <div class="userGrid">
          <!-- GRID LEFT -->
          <div class="w-layout-grid grid">
            <div *ngFor="let comment of comments | slice : 0 : halfLength">
              <!-- Repeatable review -->
              <div class="userreviewcell whitecard">
                <div class="review">
                  <div class="reviewheader">
                    <div class="reviewinfo">
                      {{ formatTimestamp(comment.createdAt) }}
                    </div>
                    <div class="reviewinfo">
                      Would Recommend:
                      {{ comment.wouldTakeAgain ? "Yes" : "No" }}
                    </div>

                    <div class="trashbutton">
                      <p-button
                        icon="pi pi-trash"
                        (click)="removeReview(comment._id)"
                        size="small"
                      ></p-button>
                    </div>
                  </div>
                  <div class="smlldiv"></div>
                  <div class="crsdesct">
                    {{ comment.message }}
                  </div>
                  <div class="fildwidthdiv"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- GRID Right -->
          <div class="w-layout-grid grid">
            <div *ngFor="let comment of comments | slice : halfLength">
              <!-- Repeatable review -->
              <div class="userreviewcell whitecard">
                <div class="review">
                  <div class="reviewheader">
                    <div class="reviewinfo">
                      {{ formatTimestamp(comment.createdAt) }}
                    </div>
                    <div class="reviewinfo">
                      Would Recommend:
                      {{ comment.wouldTakeAgain ? "Yes" : "No" }}
                    </div>

                    <div class="trashbutton">
                      <p-button
                        icon="pi pi-trash"
                        (click)="removeReview(comment._id)"
                        size="small"
                      ></p-button>
                    </div>
                  </div>
                  <div class="smlldiv"></div>
                  <div class="crsdesct">
                    {{ comment.message }}
                  </div>
                  <div class="fildwidthdiv"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
<app-footer></app-footer>
